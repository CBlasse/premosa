<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PreMosa by PreMosa</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
				<img src="./images/PreMosaLogo.png" alt="PreMosa" ><br>
				<p align="center">Mosaic Preprocessing Pipeline</p>
        <ul>
          <li><a href="https://github.com/PreMosa/premosa/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/PreMosa/premosa/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/PreMosa/premosa">View On <strong>GitHub</strong></a></li>
        </ul>
        <p class="view"><a href="https://github.com/PreMosa/premosa">View the Project on GitHub <small>PreMosa/premosa</small></a></p>
				
				<p  style="margin-top:5em;"><h3>Navigation</h3></p>
				<p  style="margin-left:2em;">
					<a href="index.html">1. Introduction</a><br>
					<a href="installation.html">2. Installation</a><br>
					<a href="usage.html">3. Usage</a><br>
					<!-- <a href="example.html">4. Example</a> -->
				</p>
      </header>
      <section>
        <h1>
<a id="welcome-to-premosa" class="anchor" href="#welcome-to-premosa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h1>

<p>P<font size="1em">RE</font>M<font size="1em">OSA</font> is a pipeline designed to preprocess 3D image mosaics of one or several time points fully automatically and without any interaction. In case further customization is needed, the individual programs are also provided. </p><br>
<br>

<h3>
<a id="usage-pipeline" class="anchor" href="#usage-pipeline" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mosaic Preprocessing Pipeline P<font size="1em">RE</font>M<font size="1em">OSA</font></h3>
<p>The pipeline automatically performs all processing tasks independently whether the methods are provided as C++ programs or Fiji plugins. To run P<font size="1em">RE</font>M<font size="1em">OSA</font>, one needs to use the following command:<br><br>
<span style="background-color: #f4f4f4;padding-left:30px;padding-right:30px;padding-bottom:10px;padding-top:10px">./PreMosa <em>parameter.xml</em></span><br><br>	
The xml file contains all required and optional parameter:</p>
<img src="./images/XMLParameter.png"  alt="XML Parameter">
<table>
  <tr  style="border-bottom:2px solid #e5e5e5;">
    <td width=150px><em>Required parameter</em></td>
		<td><em>Description</em></td>
  </tr>
  <tr>
    <td>&lt;folderNameExpression&gt;</td>
		<td>Template of the subfolders names: {iii} encodes the time point </td>
  </tr>
  <tr>
    <td>&lt;fileNameExpression&gt;</td>
		<td>Template of the input images: {iii} encodes the tile number, TIME the time </td>
  </tr>
  <tr>
    <td>&lt;tStart&gt;</td>
		<td>First time point</td>
  </tr>
  <tr>
    <td>&lt;tEnd&gt;</td>
		<td>Last time point</td>
  </tr>
  <tr>
    <td>&lt;fiji&gt;</td>
		<td>Path to the Fiji application</td>
  </tr>
  <tr>
    <td>&lt;scriptLocation&gt;</td>
		<td>Path to the Fiji scripts required for PreMosa</td>
  </tr>
  <tr>
    <td>&lt;tileNumber&gt;</td>
		<td>Number of tiles</td>
  </tr>
  <tr>
    <td>&lt;gridSizeX&gt;</td>
		<td>Number of tiles in X direction</td>
  </tr>
  <tr>
    <td>&lt;gridSizeY&gt;</td>
		<td>Number of tiles in Y direction</td>
  </tr>
  <tr>
    <td>&lt;firstIndex&gt;</td>
		<td>Index of the first tile</td>
  </tr>
  <tr>
    <td>&lt;outputFolder&gt;</td>
		<td>Output folder</td>
  </tr>
  <tr  style="border-bottom:2px solid #e5e5e5;border-top:2px solid #e5e5e5;">
    <td width=150px><em>Optional parameter</em></td>
		<td><em>Description</em></td>
  </tr>
  <tr>
    <td>&lt;verbose&gt;</td>
		<td>Activation/Deactivation of printing of preprocessing statuses</td>
  </tr>
  <tr>
    <td>&lt;intermediateFileDeletion&gt;</td>
		<td>Activation/Deactivation of deletion of all files created during the preprocessing</td>
  </tr>
  <tr>
    <td>&lt;radius&gt;</td>
		<td>Grid size (Surface Extraction)</td>
  </tr>
  <tr>
    <td>&lt;distance&gt;</td>
		<td>Distance parameter (Surface Extraction)</td>
  </tr>
  <tr>
    <td>&lt;threshold&gt;</td>
		<td>Number of bright pixels (Surface Extraction)</td>
  </tr>
  <tr>
    <td>&lt;printHeightMap&gt;</td>
		<td>Activation/Deactivation of export of the height map (Surface Extraction)</td>
  </tr>
  <tr>
    <td>&lt;overlap&gt;</td>
		<td>Percentage of overlap of the mosaic tiles (Stitching)</td>
  </tr>
  <tr>
    <td>&lt;masterTileConfig&gt;</td>
		<td>File with fixed stitching coordinates (Stitching)</td>
  </tr>
  <tr>
    <td>&lt;flatField&gt;</td>
		<td>Path to a precomputed flat field image (Flat field correction)</td>
  </tr>
  <tr>
    <td>&lt;minIntensity&gt;</td>
		<td>Minimum intensity accepted for the sampled pixel pairs (Contrast adjustment)</td>
  </tr>
  <tr>
    <td>&lt;maxIntensity&gt;</td>
		<td>Maximum intensity accepted for the sampled pixel pairs (Contrast adjustment)</td>
  </tr>
  <tr>
    <td>&lt;numberOfPixelPairs&gt;</td>
		<td>Number of sampled pixel pairs (Contrast adjustment)</td>
  </tr>
  <tr>
    <td>&lt;lambda1&gt;</td>
		<td>Penalties for the integrated regularizer (Contrast adjustment)</td>
  </tr>
  <tr>
    <td>&lt;lambda2&gt;</td>
		<td>Penalties for the integrated regularizer (Contrast adjustment)</td>
  </tr>
	
</table>
<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Surface extraction</h3>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Extended surface extraction</h3>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Flat field correction</h3>
<p>The flat field correction removes uneven illumination in 2D images (8-bit, 16-bit) using a flat field with was either provided as an input or generated from the input image. The usage is the following:
<br><br>
<span style="background-color: #f4f4f4;padding-left:30px;padding-right:30px;padding-bottom:10px;padding-top:10px">./FlatFieldCorrection -in <em>inputImage.tif</em> [-ff <em>flatFieldImage.tif</em>] -out <em>outputImage.tif</em></span><br><br>
Whereas the input and output image (-in, -out) are required parameters, the flat field image (-ff) can be optionally specified.</p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mosaic stitching</h3>
<p>To stitch the image mosaic, we apply the Fiji plugin <em>Grid Stitching</em>, which allows one to merge the tiles using the information about the layout or a predefined coordinates for each tile. </p>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contrast Adjustment</h3>
<p>To adjust the contrast and brightness of individual tiles in a mosaic, we provide a Fiji plugin.
	<img src="./images/ContrastAdjustment.png" alt="ContrastAdjustment plugin" ><br>
	 This plugin requires the following parameter:</p>
<table>
  <tr  style="border-bottom:2px solid #e5e5e5;">
    <td width=150px><em>Parameter</em></td>
		<td><em>Description</em></td>
  </tr>
  <tr>
    <td>Folder</td>
		<td>Folder with all image tiles</td>
  </tr>
  <tr>
    <td>Output Folder</td>
		<td>Folder for all corrected images</td>
  </tr>
  <tr>
    <td>Tile Configuration</td>
		<td>File with the position of each image tile, generated using the <em>Grid Stitching</em> plugin</td>
  </tr>
	<tr>
    <td>Minimum / Maximum intensity</td>
		<td>Definition of the intensity range accepted for the sampled pixel pairs</td>
  </tr>
	<tr>
    <td>Number of samples</td>
		<td>Number of sampled pixel pairs</td>
  </tr>
	<tr>
    <td>Lambda 1 / Lambda 2</td>
		<td>Penalties for the integrated regularizer (The higher, the bigger the possible divergence from the original images)</td>
  </tr>
</table>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/PreMosa">PreMosa</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
